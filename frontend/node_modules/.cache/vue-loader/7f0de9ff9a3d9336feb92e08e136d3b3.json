{"remainingRequest":"D:\\SCHOOL\\AN 4\\DS\\Assig2\\frontendV2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SCHOOL\\AN 4\\DS\\Assig2\\frontendV2\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SCHOOL\\AN 4\\DS\\Assig2\\frontendV2\\src\\views\\Login.vue","mtime":1639659545082},{"path":"D:\\SCHOOL\\AN 4\\DS\\Assig2\\frontendV2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636730066257},{"path":"D:\\SCHOOL\\AN 4\\DS\\Assig2\\frontendV2\\node_modules\\babel-loader\\lib\\index.js","mtime":1636981172297},{"path":"D:\\SCHOOL\\AN 4\\DS\\Assig2\\frontendV2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636730066257},{"path":"D:\\SCHOOL\\AN 4\\DS\\Assig2\\frontendV2\\node_modules\\vue-loader\\lib\\index.js","mtime":1636981183272}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSGVsbG9Xb3JsZCIsCgogIGRhdGE6ICgpID0+ICh7CiAgICBtb2RlOiAibG9naW4iLAogICAgbG9naW46IHsKICAgICAgZW1haWw6ICIiLAogICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgbmFtZTogIiIsCiAgICAgIHBob25lX251bWJlcjogIiIsCiAgICAgIHBhc3N3b3JkOiAiYWRtaW4iLAogICAgfSwKICB9KSwKICBtZXRob2RzOiB7CiAgICBhdHRlbXB0TG9naW4oKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJhdXRoL2xvZ2luIiwgdGhpcy5sb2dpbikudGhlbigoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmF1dGguc3RhdHVzLmxvZ2dlZEluKSB7CiAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVyc1siYXV0aC9pc0FkbWluIl0pIHsKICAgICAgICAgICAgcm91dGVyLnB1c2goIi91c2VycyIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbImF1dGgvaXNFbXBsb3llZSJdKSB7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvYm9va2luZyIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbImF1dGgvaXNDdXN0b21lciJdKSB7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvZGV2aWNlcy9jbGllbnQiKTsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuZ2V0dGVyc1siYXV0aC9nZXRDdXN0b21lcklEIl0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgiSW52YWxpZCBjcmVkZW50aWFscyEiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGF0dGVtcHRSZWdpc3RlcigpIHsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImF1dGgvcmVnaXN0ZXIiLCB0aGlzLmxvZ2luKTsKICAgICAgdGhpcy5sb2dpbi5lbWFpbCA9ICIiOwogICAgICB0aGlzLmxvZ2luLnBob25lX251bWJlciA9ICIiOwogICAgICB0aGlzLmxvZ2luLm5hbWUgPSAiIjsKICAgICAgdGhpcy5sb2dpbi51c2VybmFtZSA9ICIiOwogICAgICB0aGlzLmxvZ2luLnBhc3N3b3JkID0gIiI7CiAgICB9LAoKICAgIHRvZ2dsZU1vZGUoKSB7CiAgICAgIHRoaXMubW9kZSA9IHRoaXMubW9kZSA9PT0gImxvZ2luIiA/ICJyZWdpc3RlciIgOiAibG9naW4iOwogICAgfSwKCiAgICBsb2dvdXQoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJhdXRoL2xvZ291dCIpOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnN0YXR1cy5sb2dnZWRJbjsKICAgIH0sCiAgICBpbkxvZ2luTW9kZTogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSAibG9naW4iOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container>\n    <v-layout row justify-center pt-3>\n      <v-flex xs4 class=\"grey lighten-4\">\n        <v-container class=\"text-xs-center\">\n          <v-card flat>\n            <v-card-title primary-title>\n              <h4 v-if=\"inLoginMode\">Login</h4>\n              <h4 v-else>Register</h4>\n            </v-card-title>\n            <v-form>\n              <v-text-field\n                v-if=\"mode === 'register'\"\n                prepend-icon=\"email\"\n                name=\"Email\"\n                label=\"Email\"\n                v-model=\"login.email\"\n                validate-on-blur\n              >\n              </v-text-field>\n              <v-text-field\n                v-if=\"mode === 'register'\"\n                name=\"Phone number\"\n                label=\"Phone number\"\n                type=\"phone_number\"\n                v-model=\"login.phone_number\"\n                validate-on-blur\n              ></v-text-field>\n              <v-text-field\n                v-if=\"mode === 'register'\"\n                name=\"Name \"\n                label=\"Name\"\n                type=\"name\"\n                v-model=\"login.name\"\n                validate-on-blur\n              ></v-text-field>\n              <v-text-field\n                prepend-icon=\"person\"\n                name=\"Username\"\n                label=\"Username\"\n                v-model=\"login.username\"\n                validate-on-blur\n              ></v-text-field>\n              <v-text-field\n                prepend-icon=\"lock\"\n                name=\"Password\"\n                label=\"Password\"\n                type=\"password\"\n                v-model=\"login.password\"\n                validate-on-blur\n              ></v-text-field>\n\n              <v-card-actions>\n                <v-container>\n                  <v-layout v-if=\"inLoginMode\" row justify-center>\n                    <v-btn primary large block @click=\"attemptLogin\"\n                      >Login</v-btn\n                    >\n                    <!-- <v-btn plain @click=\"toggleMode\">\n                      No account? Click to register!\n                    </v-btn> -->\n                  </v-layout>\n\n                  <v-layout v-else row justify-center>\n                    <v-btn primary large block @click=\"attemptRegister\"\n                      >Register</v-btn\n                    >\n                    <v-btn plain @click=\"toggleMode\">\n                      Already registered? Click to login!\n                    </v-btn>\n                  </v-layout>\n\n                  <v-layout v-if=\"isLoggedIn\" row justify-center>\n                    <v-btn @click=\"logout\"> Logout </v-btn>\n                  </v-layout>\n                </v-container>\n              </v-card-actions>\n            </v-form>\n          </v-card>\n        </v-container>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport router from \"../router\";\n\nexport default {\n  name: \"HelloWorld\",\n\n  data: () => ({\n    mode: \"login\",\n    login: {\n      email: \"\",\n      username: \"admin\",\n      name: \"\",\n      phone_number: \"\",\n      password: \"admin\",\n    },\n  }),\n  methods: {\n    attemptLogin() {\n      this.$store.dispatch(\"auth/login\", this.login).then(() => {\n        if (this.$store.state.auth.status.loggedIn) {\n          if (this.$store.getters[\"auth/isAdmin\"]) {\n            router.push(\"/users\");\n          }\n          if (this.$store.getters[\"auth/isEmployee\"]) {\n            router.push(\"/booking\");\n          }\n          if (this.$store.getters[\"auth/isCustomer\"]) {\n            router.push(\"/devices/client\");\n            console.log(this.$store.getters[\"auth/getCustomerID\"]);\n          }\n        } else {\n          alert(\"Invalid credentials!\");\n        }\n      });\n    },\n    async attemptRegister() {\n      await this.$store.dispatch(\"auth/register\", this.login);\n      this.login.email = \"\";\n      this.login.phone_number = \"\";\n      this.login.name = \"\";\n      this.login.username = \"\";\n      this.login.password = \"\";\n    },\n\n    toggleMode() {\n      this.mode = this.mode === \"login\" ? \"register\" : \"login\";\n    },\n\n    logout() {\n      this.$store.dispatch(\"auth/logout\");\n    },\n  },\n  computed: {\n    isLoggedIn: function () {\n      return this.$store.state.auth.status.loggedIn;\n    },\n    inLoginMode: function () {\n      return this.mode === \"login\";\n    },\n  },\n};\n</script>\n"]}]}