(function(e){function t(t){for(var n,i,o=t[0],c=t[1],u=t[2],l=0,v=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&v.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(v.length)v.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},a=[];function i(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"cbd49cab"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r=s[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=n);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(e);var u=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(l);var r=s[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",u.name="ChunkLoadError",u.type=n,u.request=a,r[1](u)}s[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"343c":function(e,t,r){"use strict";r.r(t);var n=r("c1fb");t["default"]={allDevices:function(){return n["b"].get(n["a"]+"/devices",{headers:Object(n["c"])()}).then((function(e){return e.data}))},create:function(e){return n["b"].post(n["a"]+"/devices",e,{headers:Object(n["c"])()}).then((function(e){return e.data}))},update:function(e){return n["b"].put(n["a"]+"/devices/".concat(e.id),e,{headers:Object(n["c"])()}).then((function(e){return e.data}))},delete:function(e){return n["b"].delete(n["a"]+"/devices/".concat(e.id),{headers:Object(n["c"])()}).then((function(e){return e.data}))}}},"3c2b":function(e,t,r){"use strict";r.r(t);var n=r("c1fb");t["default"]={allSensors:function(){return n["b"].get(n["a"]+"/sensors",{headers:Object(n["c"])()}).then((function(e){return e.data}))},create:function(e){return n["b"].post(n["a"]+"/sensors",e,{headers:Object(n["c"])()}).then((function(e){return e.data}))},update:function(e){return n["b"].put(n["a"]+"/sensors/".concat(e.id),e,{headers:Object(n["c"])()}).then((function(e){return e.data}))},delete:function(e){return n["b"].delete(n["a"]+"/sensors/".concat(e.id),{headers:Object(n["c"])()}).then((function(e){return e.data}))}}},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-main",[r("v-container",{attrs:{fluid:""}},[e.isLoggedIn?r("TopBar"):e._e(),r("router-view")],1)],1)],1)},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{color:"grey lighten-4",flat:"",tile:""}},[r("v-toolbar",[r("v-app-bar-nav-icon"),r("v-toolbar-title",[e._v("Energy Consumption")]),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:e.logout}},[r("v-icon",[e._v("logout")])],1)],1)],1)},o=[],c=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{row:"","justify-center":"","pt-3":""}},[r("v-flex",{staticClass:"grey lighten-4",attrs:{xs4:""}},[r("v-container",{staticClass:"text-xs-center"},[r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"primary-title":""}},[e.inLoginMode?r("h4",[e._v("Login")]):r("h4",[e._v("Register")])]),r("v-form",["register"===e.mode?r("v-text-field",{attrs:{"prepend-icon":"email",name:"Email",label:"Email","validate-on-blur":""},model:{value:e.login.email,callback:function(t){e.$set(e.login,"email",t)},expression:"login.email"}}):e._e(),r("v-text-field",{attrs:{"prepend-icon":"person",name:"Username",label:"Username","validate-on-blur":""},model:{value:e.login.username,callback:function(t){e.$set(e.login,"username",t)},expression:"login.username"}}),"register"===e.mode?r("v-text-field",{attrs:{"prepend-icon":"address",name:"Address",label:"Address",type:"address","validate-on-blur":""},model:{value:e.login.address,callback:function(t){e.$set(e.login,"address",t)},expression:"login.address"}}):e._e(),"register"===e.mode?r("v-text-field",{attrs:{"prepend-icon":"age",name:"Age",label:"Age",type:"age","validate-on-blur":""},model:{value:e.login.age,callback:function(t){e.$set(e.login,"age",t)},expression:"login.age"}}):e._e(),r("v-text-field",{attrs:{"prepend-icon":"lock",name:"Password",label:"Password",type:"password","validate-on-blur":""},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}}),r("v-card-actions",[r("v-container",[e.inLoginMode?r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-btn",{attrs:{primary:"",large:"",block:""},on:{click:e.attemptLogin}},[e._v("Login")]),r("v-btn",{attrs:{plain:""},on:{click:e.toggleMode}},[e._v(" No account? Click to register! ")])],1):r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-btn",{attrs:{primary:"",large:"",block:""},on:{click:e.attemptRegister}},[e._v("Register")]),r("v-btn",{attrs:{plain:""},on:{click:e.toggleMode}},[e._v(" Already registered? Click to login! ")])],1),e.isLoggedIn?r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-btn",{on:{click:e.logout}},[e._v(" Logout ")])],1):e._e()],1)],1)],1)],1)],1)],1)],1)],1)},l=[],d=r("1da1"),v=(r("96cf"),{name:"HelloWorld",data:function(){return{mode:"login",login:{email:"",username:"admin",password:"WooHoo1!"}}},methods:{attemptLogin:function(){var e=this;this.$store.dispatch("auth/login",this.login).then((function(){e.$store.state.auth.status.loggedIn?e.$store.getters["auth/isAdmin"]?Te.push("/users"):e.$store.getters["auth/isCustomer"]&&Te.push("/customers"):alert("Invalid credentials!")}))},attemptRegister:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth/register",e.login);case 2:case"end":return t.stop()}}),t)})))()},toggleMode:function(){this.mode="login"===this.mode?"register":"login"},logout:function(){this.$store.dispatch("auth/logout")}},computed:{isLoggedIn:function(){return this.$store.state.auth.status.loggedIn},inLoginMode:function(){return"login"===this.mode}}}),f=v,h=r("2877"),p=r("6544"),m=r.n(p),g=r("8336"),b=r("b0af"),x=r("99d9"),V=r("a523"),w=r("0e8f"),k=r("4bd4"),C=r("a722"),y=r("8654"),_=Object(h["a"])(f,u,l,!1,null,null,null),j=_.exports;m()(_,{VBtn:g["a"],VCard:b["a"],VCardActions:x["a"],VCardTitle:x["b"],VContainer:V["a"],VFlex:w["a"],VForm:k["a"],VLayout:C["a"],VTextField:y["a"]});var O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" Users "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-btn",{on:{click:e.device}},[e._v("Devices")]),r("v-btn",{on:{click:e.sensor}},[e._v("Sensors")]),r("v-btn",{on:{click:e.addUser}},[e._v("Add User")])],1),r("v-data-table",{attrs:{headers:e.headers,items:e.users,search:e.search},on:{"click:row":e.editUser}}),r("UserDialog",{attrs:{opened:e.dialogVisible,user:e.selectedUser},on:{refresh:e.refreshList}})],1)},$=[],D=r("5530"),S=(r("159b"),r("ac1f"),r("5319"),r("15a4")),E=r("89da"),I={};E.keys().forEach((function(e){if("./index.js"!==e){var t=Object(S["a"])(e.replace(/(\.\/|\.js)/g,""));I[t]=Object(D["a"])({},E(e).default)}}));var L=I,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"600",value:e.opened}},[[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v(" "+e._s(e.isNew?"Create user":"Edit user")+" ")]),r("v-form",[r("v-text-field",{attrs:{label:"Username"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),r("v-text-field",{attrs:{label:"Email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),r("v-text-field",{attrs:{label:"Password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),r("v-text-field",{attrs:{label:"Address"},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}}),r("v-text-field",{attrs:{label:"Age"},model:{value:e.user.age,callback:function(t){e.$set(e.user,"age",t)},expression:"user.age"}}),r("v-text-field",{attrs:{label:"Role"},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}})],1),r("v-card-actions",[r("v-btn",{on:{click:e.persist}},[e._v(" "+e._s(e.isNew?"Create":"Save")+" ")]),r("v-btn",{on:{click:e.deleteUser}},[e._v("Delete User")])],1)],1)]],2)},T=[],R={name:"UserDialog",props:{user:Object,opened:Boolean},methods:{persist:function(){var e=this;this.isNew?L.users.create({name:this.user.username,email:this.user.email,password:this.user.password,role:this.user.role,address:this.user.address,age:this.user.age}).then((function(){return e.$emit("refresh")})):L.users.update({id:this.user.id,name:this.user.username,email:this.user.email,role:this.user.role,address:this.user.address,age:this.user.age}).then((function(){return e.$emit("refresh")}))},deleteUser:function(){var e=this;L.users.delete({id:this.user.id}).then((function(){return e.$emit("refresh")}))}},computed:{isNew:function(){return!this.user.id}}},A=R,M=r("169a"),N=r("71d9"),F=Object(h["a"])(A,U,T,!1,null,"5f648833",null),B=F.exports;m()(F,{VBtn:g["a"],VCard:b["a"],VCardActions:x["a"],VDialog:M["a"],VForm:k["a"],VTextField:y["a"],VToolbar:N["a"]});var P={name:"UserList",components:{UserDialog:B},data:function(){return{users:[],search:"",headers:[{text:"Username",align:"start",sortable:!1,value:"name"},{text:"Email",value:"email"},{text:"Roles",value:"roles"}],dialogVisible:!1,selectedUser:{}}},methods:{device:function(){Te.push("./devices")},sensor:function(){Te.push("./sensors")},editUser:function(e){this.selectedUser=e,this.dialogVisible=!0},addUser:function(){this.dialogVisible=!0},refreshList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!1,e.selectedUser={},t.next=4,L.users.allUsers();case 4:e.users=t.sent;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.getters["auth/isAdmin"]){t.next=7;break}return t.next=3,e.$store.dispatch("auth/logout");case 3:return t.next=5,Te.push("/");case 5:t.next=9;break;case 7:return t.next=9,e.refreshList();case 9:case"end":return t.stop()}}),t)})))()}},J=P,H=r("8fea"),W=r("2fa4"),q=Object(h["a"])(J,O,$,!1,null,"5cd6e80a",null),z=q.exports;m()(q,{VBtn:g["a"],VCard:b["a"],VCardTitle:x["b"],VDataTable:H["a"],VSpacer:W["a"],VTextField:y["a"]});r("caad"),r("2532");var G=JSON.parse(localStorage.getItem("user")),K=G?{status:{loggedIn:!0},user:G}:{status:{loggedIn:!1},user:null},Q={namespaced:!0,state:K,user:G,actions:{login:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.abrupt("return",L.auth.login(t).then((function(e){return n("loginSuccess",e),Promise.resolve(e)}),(function(e){return n("loginFailure"),Promise.reject(e)})));case 2:case"end":return r.stop()}}),r)})))()},logout:function(e){var t=e.commit;L.auth.logout(),t("logout")},register:function(e,t){var r=e.commit;return L.auth.register(t).then((function(e){return r("registerSuccess"),Promise.resolve(e.data)}),(function(e){return r("registerFailure"),Promise.reject(e)}))}},mutations:{loginSuccess:function(e,t){e.status.loggedIn=!0,e.user=t},loginFailure:function(e){e.status.loggedIn=!1,e.user=null},logout:function(e){e.status.loggedIn=!1,e.user=null},registerSuccess:function(e){e.status.loggedIn=!1},registerFailure:function(e){e.status.loggedIn=!1}},getters:{isAdmin:function(e){return e.user.roles.includes("ADMIN")},isCustomer:function(e){return e.user.roles.includes("CUSTOMER")},getUserId:function(e){return e.user}}},X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" Devices "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-btn",{on:{click:e.addDevice}},[e._v("Add Device")])],1),r("v-data-table",{attrs:{headers:e.headers,items:e.devices,search:e.search},on:{"click:row":e.editDevice}}),r("DeviceDialog",{attrs:{opened:e.dialogVisible,device:e.selectedDevice},on:{refresh:e.refreshList}})],1)},Y=[],Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"600",value:e.opened}},[[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v(" "+e._s(e.isNew?"Create device":"Edit device")+" ")]),r("v-form",[r("v-text-field",{attrs:{label:"avgEC"},model:{value:e.device.averageEnergyConsumption,callback:function(t){e.$set(e.device,"averageEnergyConsumption",t)},expression:"device.averageEnergyConsumption"}}),r("v-text-field",{attrs:{label:"Description"},model:{value:e.device.description,callback:function(t){e.$set(e.device,"description",t)},expression:"device.description"}}),r("v-text-field",{attrs:{label:"Location"},model:{value:e.device.location,callback:function(t){e.$set(e.device,"location",t)},expression:"device.location"}}),r("v-text-field",{attrs:{label:"maxEC"},model:{value:e.device.maxEnergyConsumption,callback:function(t){e.$set(e.device,"maxEnergyConsumption",t)},expression:"device.maxEnergyConsumption"}}),r("v-text-field",{attrs:{label:"User Id"},model:{value:e.device.userId,callback:function(t){e.$set(e.device,"userId",t)},expression:"device.userId"}}),r("v-text-field",{attrs:{label:"Sensor Id"},model:{value:e.device.sensorId,callback:function(t){e.$set(e.device,"sensorId",t)},expression:"device.sensorId"}})],1),r("v-card-actions",[r("v-btn",{on:{click:e.persist}},[e._v(" "+e._s(e.isNew?"Create":"Save")+" ")]),r("v-btn",{on:{click:e.deleteDevice}},[e._v("Delete Device")])],1)],1)]],2)},ee=[],te=(r("a4d3"),r("e01a"),{name:"DeviceDialog",props:{device:Object,opened:Boolean},methods:{persist:function(){var e=this;this.isNew?L.devices.create({averageEnergyConsumption:this.device.averageEnergyConsumption,description:this.device.description,location:this.device.location,maxEnergyConsumption:this.device.maxEnergyConsumption,userId:this.device.userId,sensorId:this.device.sensorId}).then((function(){return e.$emit("refresh")})):L.devices.update({id:this.device.id,averageEnergyConsumption:this.device.averageEnergyConsumption,description:this.device.description,location:this.device.location,maxEnergyConsumption:this.device.maxEnergyConsumption,userId:this.device.userId,sensorId:this.device.sensorId}).then((function(){return e.$emit("refresh")}))},deleteDevice:function(){var e=this;L.devices.delete({id:this.device.id}).then((function(){return e.$emit("refresh")}))}},computed:{isNew:function(){return!this.device.id}}}),re=te,ne=Object(h["a"])(re,Z,ee,!1,null,"4fede92b",null),se=ne.exports;m()(ne,{VBtn:g["a"],VCard:b["a"],VCardActions:x["a"],VDialog:M["a"],VForm:k["a"],VTextField:y["a"],VToolbar:N["a"]});var ae={name:"DeviceList",components:{DeviceDialog:se},data:function(){return{devices:[],search:"",headers:[{text:"Device",align:"start",sortable:!1,value:"name"},{text:"AvgEC",value:"averageEnergyConsumption"},{text:"MaxEC",value:"maxEnergyConsumption"},{text:"Description",value:"description"},{text:"Location",value:"location"},{text:"UserId",value:"userId"},{text:"SensorId",value:"sensorId"}],dialogVisible:!1,selectedDevice:{}}},methods:{editDevice:function(e){this.selectedDevice=e,this.dialogVisible=!0},addDevice:function(){this.dialogVisible=!0},refreshList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!1,e.selectedDevice={},t.next=4,L.devices.allDevices();case 4:e.devices=t.sent;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.getters["auth/isAdmin"]){t.next=7;break}return t.next=3,e.$store.dispatch("auth/logout");case 3:return t.next=5,Te.push("/");case 5:t.next=9;break;case 7:return t.next=9,e.refreshList();case 9:case"end":return t.stop()}}),t)})))()}},ie=ae,oe=Object(h["a"])(ie,X,Y,!1,null,"67915168",null),ce=oe.exports;m()(oe,{VBtn:g["a"],VCard:b["a"],VCardTitle:x["b"],VDataTable:H["a"],VSpacer:W["a"],VTextField:y["a"]});var ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" Sensors "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-btn",{on:{click:e.addSensor}},[e._v("Add Sensor")])],1),r("v-data-table",{attrs:{headers:e.headers,items:e.sensors,search:e.search},on:{"click:row":e.editSensor}}),r("SensorDialog",{attrs:{opened:e.dialogVisible,sensor:e.selectedSensor},on:{refresh:e.refreshList}})],1)},le=[],de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"600",value:e.opened}},[[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v(" "+e._s(e.isNew?"Create sensor":"Edit sensor")+" ")]),r("v-form",[r("v-text-field",{attrs:{label:"Description"},model:{value:e.sensor.description,callback:function(t){e.$set(e.sensor,"description",t)},expression:"sensor.description"}}),r("v-text-field",{attrs:{label:"MaxValue"},model:{value:e.sensor.maxValue,callback:function(t){e.$set(e.sensor,"maxValue",t)},expression:"sensor.maxValue"}})],1),r("v-card-actions",[r("v-btn",{on:{click:e.persist}},[e._v(" "+e._s(e.isNew?"Create":"Save")+" ")]),r("v-btn",{on:{click:e.deleteSensor}},[e._v("Delete Sensor")])],1)],1)]],2)},ve=[],fe={name:"SensorDialog",props:{sensor:Object,opened:Boolean},methods:{persist:function(){var e=this;this.isNew?L.sensors.create({description:this.sensor.description,maxValue:this.sensor.maxValue,deviceId:this.sensor.deviceId}).then((function(){return e.$emit("refresh")})):L.sensors.update({id:this.sensor.id,description:this.sensor.description,maxValue:this.sensor.maxValue,deviceId:this.sensor.deviceId}).then((function(){return e.$emit("refresh")}))},deleteSensor:function(){var e=this;L.sensors.delete({id:this.sensor.id}).then((function(){return e.$emit("refresh")}))}},computed:{isNew:function(){return!this.sensor.id}}},he=fe,pe=Object(h["a"])(he,de,ve,!1,null,"0baca29e",null),me=pe.exports;m()(pe,{VBtn:g["a"],VCard:b["a"],VCardActions:x["a"],VDialog:M["a"],VForm:k["a"],VTextField:y["a"],VToolbar:N["a"]});var ge={name:"SensorList",components:{SensorDialog:me},data:function(){return{sensors:[],search:"",headers:[{text:"Sensor",align:"start",sortable:!1,value:"name"},{text:"Description",value:"description"},{text:"MaxValue",value:"maxValue"}],dialogVisible:!1,selectedSensor:{}}},methods:{editSensor:function(e){this.selectedSensor=e,this.dialogVisible=!0},addSensor:function(){this.dialogVisible=!0},refreshList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!1,e.selectedSensor={},t.next=4,L.sensors.allSensors();case 4:e.sensors=t.sent;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.getters["auth/isAdmin"]){t.next=7;break}return t.next=3,e.$store.dispatch("auth/logout");case 3:return t.next=5,Te.push("/");case 5:t.next=9;break;case 7:return t.next=9,e.refreshList();case 9:case"end":return t.stop()}}),t)})))()}},be=ge,xe=Object(h["a"])(be,ue,le,!1,null,"74e84e0f",null),Ve=xe.exports;m()(xe,{VBtn:g["a"],VCard:b["a"],VCardTitle:x["b"],VDataTable:H["a"],VSpacer:W["a"],VTextField:y["a"]});var we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" Devices "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-btn",{on:{click:e.consumption}},[e._v("Consumption")])],1),r("v-data-table",{attrs:{headers:e.headers,items:e.users,search:e.search}}),r("UserDialog",{attrs:{opened:e.dialogVisible,user:e.selectedUser},on:{refresh:e.refreshList}}),r("vue-bar-graph",{attrs:{points:[3,5,2,5,4],width:400,height:200}})],1)},ke=[],Ce={name:"CustomerList",components:{UserDialog:B},data:function(){return{users:[],search:"",headers:[{align:"start",sortable:!1,value:"name"},{text:"AvgEC",value:"averageEnergyConsumption"},{text:"MaxEC",value:"maxEnergyConsumption"},{text:"Description",value:"description"},{text:"Location",value:"location"},{text:"UserId",value:"userId"},{text:"SensorId",value:"sensorId"}],dialogVisible:!1,selectedUser:{}}},methods:{consumption:function(){Te.push("./measures")},refreshList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!1,e.selectedUser={},t.next=4,L.users.getDevices(e.$store.getters["auth/getUserId"]);case 4:e.users=t.sent;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.getters["auth/isCustomer"]){t.next=7;break}return t.next=3,e.$store.dispatch("auth/logout");case 3:return t.next=5,Te.push("/");case 5:t.next=9;break;case 7:return t.next=9,e.refreshList();case 9:case"end":return t.stop()}}),t)})))()}},ye=Ce,_e=Object(h["a"])(ye,we,ke,!1,null,"68e05e64",null),je=_e.exports;m()(_e,{VBtn:g["a"],VCard:b["a"],VCardTitle:x["b"],VDataTable:H["a"],VSpacer:W["a"],VTextField:y["a"]});var Oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" Measurements "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{attrs:{headers:e.headers,items:e.users,search:e.search}}),r("UserDialog",{attrs:{opened:e.dialogVisible,user:e.selectedUser},on:{refresh:e.refreshList}})],1)},$e=[],De={name:"MeasureList",components:{UserDialog:B},data:function(){return{users:[],search:"",headers:[{align:"start",sortable:!1,value:"name"},{text:"Energy Consumption",value:"energyConsumption"},{text:"Timestamp",value:"timestamp"},{text:"Sensor Id",value:"sensorId"}],dialogVisible:!1,selectedUser:{}}},methods:{refreshList:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!1,e.selectedUser={},t.next=4,L.users.getConsumption(e.$store.getters["auth/getUserId"]);case 4:e.users=t.sent,console.log(e.users);case 6:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.getters["auth/isCustomer"]){t.next=7;break}return t.next=3,e.$store.dispatch("auth/logout");case 3:return t.next=5,Te.push("/");case 5:t.next=9;break;case 7:return t.next=9,e.refreshList();case 9:case"end":return t.stop()}}),t)})))()}},Se=De,Ee=Object(h["a"])(Se,Oe,$e,!1,null,"6d700cd2",null),Ie=Ee.exports;m()(Ee,{VCard:b["a"],VCardTitle:x["b"],VDataTable:H["a"],VSpacer:W["a"],VTextField:y["a"]}),n["a"].use(c["a"]);var Le=[{path:"/",name:"Login",component:j},{path:"/users",name:"Users",component:z,beforeEnter:function(e,t,r){Q.getters.isAdmin?r():r({name:"Devices"})}},{path:"/devices",name:"Devices",component:ce,beforeEnter:function(e,t,r){Q.getters.isAdmin?r():r({name:"Login"})}},{path:"/sensors",name:"Sensors",component:Ve,beforeEnter:function(e,t,r){Q.getters.isAdmin?r():r({name:"Login"})}},{path:"/customers",name:"Customers",component:je,beforeEnter:function(e,t,r){Q.getters.isCustomer?r():r({name:"Login"})}},{path:"/measures",name:"Measurements",component:Ie,beforeEnter:function(e,t,r){Q.getters.isCustomer?r():r({name:"Login"})}},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"32b7"))}}],Ue=new c["a"]({routes:Le}),Te=Ue,Re={name:"TopBar",methods:{logout:function(){this.$store.dispatch("auth/logout"),Te.push("/")}}},Ae=Re,Me=r("5bc1"),Ne=r("132d"),Fe=r("2a7f"),Be=Object(h["a"])(Ae,i,o,!1,null,"42124c1c",null),Pe=Be.exports;m()(Be,{VAppBarNavIcon:Me["a"],VBtn:g["a"],VCard:b["a"],VIcon:Ne["a"],VSpacer:W["a"],VToolbar:N["a"],VToolbarTitle:Fe["a"]});var Je={name:"App",components:{TopBar:Pe},data:function(){return{}},computed:{isLoggedIn:function(){return this.$store.state.auth.status.loggedIn}}},He=Je,We=r("7496"),qe=r("f6c4"),ze=Object(h["a"])(He,s,a,!1,null,null,null),Ge=ze.exports;m()(ze,{VApp:We["a"],VContainer:V["a"],VMain:qe["a"]});var Ke=r("f309");n["a"].use(Ke["a"]);var Qe=new Ke["a"]({}),Xe=(r("d1e78"),r("2f62"));n["a"].use(Xe["a"]);var Ye=new Xe["a"].Store({modules:{auth:Q}});n["a"].config.productionTip=!1,new n["a"]({router:Te,vuetify:Qe,store:Ye,render:function(e){return e(Ge)}}).$mount("#app")},"89da":function(e,t,r){var n={"./auth.js":"e0c1","./devices.js":"343c","./sensors.js":"3c2b","./users.js":"ca45"};function s(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="89da"},c1fb:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o}));r("b64b"),r("d3b7"),r("25f0");var n=r("bc3a"),s=r.n(n),a="https:///ds2020-30431-pasc-andreea-1-be/api",i=s.a.create({baseURL:a});function o(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}},ca45:function(e,t,r){"use strict";r.r(t);var n=r("c1fb");t["default"]={allUsers:function(){return n["b"].get(n["a"]+"/users",{headers:Object(n["c"])()}).then((function(e){return e.data}))},create:function(e){return n["b"].post(n["a"]+"/users",e,{headers:Object(n["c"])()}).then((function(e){return e.data}))},update:function(e){return n["b"].put(n["a"]+"/users/".concat(e.id),e,{headers:Object(n["c"])()}).then((function(e){return e.data}))},delete:function(e){return n["b"].delete(n["a"]+"/users/".concat(e.id),{headers:Object(n["c"])()}).then((function(e){return e.data}))},getDevices:function(e){return n["b"].get(n["a"]+"/users/".concat(e.id),{headers:Object(n["c"])()}).then((function(e){return e.data}))},getConsumption:function(e){return n["b"].get(n["a"]+"/users/measures/".concat(e.id),{headers:Object(n["c"])()}).then((function(e){return e.data}))}}},e0c1:function(e,t,r){"use strict";r.r(t);r("e9c4");var n=r("c1fb");t["default"]={login:function(e){return n["b"].post(n["a"]+"/auth/sign-in",e).then((function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},logout:function(){localStorage.removeItem("user")},register:function(e){return n["b"].post(n["a"]+"/auth/sign-up",e)}}}});
//# sourceMappingURL=app.1f989524.js.map